#!/usr/bin/env sh

# Hyprland master layout orientation cycler - maintains per-workspace orientation state
# Cycles through left -> top -> center -> left for each workspace independently

STATE_DIR="/run/user/$UID/hyprland"
mkdir -p "$STATE_DIR"

WORKSPACE_ID=$(hyprctl activeworkspace -j | jq -r '.id')
ORIENTATION_FILE="$STATE_DIR/master_orientation_ws${WORKSPACE_ID}"

if [[ -f "$ORIENTATION_FILE" ]]; then
    current_orientation=$(cat "$ORIENTATION_FILE")
else
    current_orientation="left"
fi

case "$current_orientation" in
    "left")
        new_orientation="top"
        ;;
    "top")
        new_orientation="center"
        ;;
    "center")
        new_orientation="left"
        ;;
    *)
        new_orientation="left"
        ;;
esac

hyprctl dispatch layoutmsg orientation"$new_orientation"
echo "$new_orientation" > "$ORIENTATION_FILE"
